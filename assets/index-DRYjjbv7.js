import{g as Q,h as y,Q as X,l as Y,R as B,S as G,o as p,m as g,w as e,r as i,e as c,a as l,i as a,z as K,k as _,t as U,J as V,c as I,b as W,F as Z,j as ee,O as N,T as te,p as le,d as ae,_ as oe}from"./index-CGsZ6UvI.js";const se="/assets/auth_example-DYDL_R-N.png",h=v=>(le("data-v-44b8854b"),v=v(),ae(),v),re=h(()=>c("div",{class:"card-header"},[c("h1",null,"实名信息")],-1)),ie={class:"tip",style:{color:"#7f7f7f"}},ne=h(()=>c("div",{class:"cell-item"}," 用户姓名 ",-1)),ce=h(()=>c("div",{class:"cell-item"}," 证件类型 ",-1)),de=h(()=>c("div",{class:"cell-item"}," 证件号码 ",-1)),ue=h(()=>c("img",{style:{width:"100%",height:"100%","border-radius":"5%"},src:se,alt:""},null,-1)),pe=["src"],_e=Q({__name:"index",setup(v){let b=y(),d=y({}),x=y([]),f=y(!1),T=y(),o=X({certificatesNo:"",certificatesType:"",certificatesUrl:"",name:""});Y(()=>{k(),q()});const k=async()=>{let s=await B();s.code==200&&(d.value=s.data)},q=async()=>{let s=await G();s.code==200&&(x.value=s.data)},S=()=>{N({type:"error",message:"就只能上传一张哦~^_^"})},z=s=>{b.value.clearValidate("certificatesUrl"),o.certificatesUrl=s.data},F=()=>{f.value=!0},R=()=>{o.certificatesUrl=""},A=()=>{o.certificatesUrl="",o.certificatesType="",o.certificatesNo="",o.name="",T.value.clearFiles()},D=async()=>{await b.value.validate();try{await te(o),N({type:"success",message:"认证成功"}),k()}catch{N({type:"error",message:"认证失败"})}},P={name:[{required:!0,validator:(s,t,r)=>{/^[\u4E00-\u9FA5]{2,10}(·[\u4E00-\u9FA5]{2,10}){0,2}$/.test(t)?r():(r(new Error("请输入人名")),console.log(456))}}],certificatesType:[{required:!0,validator:(s,t,r)=>{t=="10"||t=="20"?r():r(new Error("请输入证件的类型"))}}],certificatesNo:[{required:!0,validator:(s,t,r)=>{let u=/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,w=/^\d{6}$/;u.test(t)||w.test(t)?r():r(new Error("请输入正确的身份证活着户口本的号码"))}}],certificatesUrl:[{required:!0,validator:(s,t,r)=>{t.length?(r(),console.log("证件照正确")):(console.log("证件照错误"),r(new Error("请上传证件照图片")))}}]};return(s,t)=>{const r=i("el-icon"),u=i("el-descriptions-item"),w=i("el-descriptions"),C=i("el-input"),m=i("el-form-item"),L=i("el-option"),M=i("el-select"),$=i("el-upload"),j=i("el-dialog"),E=i("el-button"),H=i("el-form"),J=i("el-card");return p(),g(J,{class:"box-card"},{header:e(()=>[re]),default:e(()=>[c("div",ie,[c("p",null,[l(r,null,{default:e(()=>[l(a(K))]),_:1}),_("完成实名认证后才能添加就诊人，正常进行挂号，为了不影响后续步骤，建议提前实名认证。")])]),a(d).authStatus==1?(p(),g(w,{key:0,size:"small",class:"margin-top",column:1,border:""},{default:e(()=>[l(u,{"label-align":"center",width:20},{label:e(()=>[ne]),default:e(()=>[_(" "+U(a(d).name),1)]),_:1}),l(u,{"label-align":"center",width:20},{label:e(()=>[ce]),default:e(()=>[_(" "+U(a(d).certificatesType=="10"?"身份证":"户口本"),1)]),_:1}),l(u,{"label-align":"center",width:20},{label:e(()=>[de]),default:e(()=>[_(" "+U(a(d).certificatesNo),1)]),_:1})]),_:1})):V("",!0),a(d).authStatus==0?(p(),g(H,{key:1,style:{width:"60%",margin:"20px auto"},"label-width":"80",model:a(o),rules:P,ref_key:"form",ref:b},{default:e(()=>[l(m,{label:"用户姓名",prop:"name"},{default:e(()=>[l(C,{placeholder:"请输入用户姓名",modelValue:a(o).name,"onUpdate:modelValue":t[0]||(t[0]=n=>a(o).name=n)},null,8,["modelValue"])]),_:1}),l(m,{label:"证件类型",prop:"certificatesType"},{default:e(()=>[l(M,{placeholder:"请选择证件类型",modelValue:a(o).certificatesType,"onUpdate:modelValue":t[1]||(t[1]=n=>a(o).certificatesType=n)},{default:e(()=>[(p(!0),I(Z,null,W(a(x),(n,O)=>(p(),g(L,{label:n.name,value:n.value,key:O},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"证件号码",prop:"certificatesNo"},{default:e(()=>[l(C,{placeholder:"请输入证件号码",modelValue:a(o).certificatesNo,"onUpdate:modelValue":t[2]||(t[2]=n=>a(o).certificatesNo=n)},null,8,["modelValue"])]),_:1}),l(m,{label:"上传证件",prop:"certificatesUrl"},{default:e(()=>[l($,{ref_key:"upload",ref:T,"on-remove":R,"list-type":"picture-card","on-preview":F,"on-success":z,"on-exceed":S,limit:1,action:"/api/oss/file/fileUpload?fileHost=userAuah"},{default:e(()=>[ue]),_:1},512),l(j,{style:{width:"500px",height:"500px"},modelValue:a(f),"onUpdate:modelValue":t[3]||(t[3]=n=>ee(f)?f.value=n:f=n)},{default:e(()=>[a(o).certificatesUrl?(p(),I("img",{key:0,"w-full":"",style:{width:"100%",height:"100%"},src:a(o).certificatesUrl,alt:"Preview Image"},null,8,pe)):V("",!0)]),_:1},8,["modelValue"])]),_:1}),l(m,null,{default:e(()=>[l(E,{type:"primary",size:"default",onClick:D},{default:e(()=>[_("提交")]),_:1}),l(E,{type:"primary",size:"default",onClick:A},{default:e(()=>[_("重写")]),_:1})]),_:1})]),_:1},8,["model"])):V("",!0)]),_:1})}}}),ge=oe(_e,[["__scopeId","data-v-44b8854b"]]);export{ge as default};
