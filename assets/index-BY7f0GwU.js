import{g as $,h as w,Q as G,l as J,K,S as Q,a1 as H,o as i,m as U,w as t,q as W,u as X,r as u,e as O,a as e,k as r,i as a,M as Z,c as V,F as x,b as T,J as I,a2 as ee,a3 as le,O as te,p as ae,d as oe,_ as se}from"./index-CGsZ6UvI.js";const de=y=>(ae("data-v-d61b2b98"),y=y(),oe(),y),ne={class:"card-header"},ue=de(()=>O("span",null,"就诊人管理",-1)),re={key:0,class:"visitors"},ie={key:1,class:"form"},ce=$({__name:"index",setup(y){let _=W(),P=X(),p=w(0),b=w([]),C=w([]),o=G({name:"",certificatesType:"",certificatesNo:"",sex:0,birthdate:"",phone:"",isMarry:0,isInsure:0,addressSelected:[],address:"",contactsName:"",contactsCertificatesType:"",contactsCertificatesNo:"",contactsPhone:""});J(()=>{h(),B(),_.query.type=="add"&&(p.value=1),_.query.type=="edit"&&(p.value=1)});const h=async()=>{let n=await K();n.code==200&&(b.value=n.data)},z=()=>{S(),p.value=1},A=n=>{p.value=1,Object.assign(o,n)},S=()=>{Object.assign(o,{id:null,name:"",certificatesType:"",certificatesNo:"",sex:0,birthdate:"",phone:"",isMarry:0,isInsure:0,addressSelected:[],address:"",contactsName:"",contactsCertificatesType:"",contactsCertificatesNo:"",contactsPhone:""})},B=async()=>{let n=await Q();n.code==200&&(C.value=n.data)},Y={lazy:!0,async lazyLoad(n,s){let g=(await ee(n.data.id||"86")).data.map(c=>({id:c.id,label:c.name,value:c.value,leaf:!c.hasChildren}));s(g)}},j=async()=>{try{await le(o),te({type:"success",message:o.id?"更新成功":"新增成功"}),_.query.type?P.back():p.value=0,h()}catch{}};H(()=>b.value,()=>{if(_.query.type=="edit"){let n=b.value.find(s=>s.id==_.query.id);Object.assign(o,n)}});const D=()=>{h()};return(n,s)=>{const v=u("el-button"),g=u("Visitor"),c=u("el-divider"),m=u("el-input"),d=u("el-form-item"),q=u("el-option"),M=u("el-select"),f=u("el-radio"),N=u("el-radio-group"),R=u("el-date-picker"),k=u("el-form"),E=u("el-cascader"),F=u("el-card");return i(),U(F,null,{header:t(()=>[O("div",ne,[ue,e(v,{class:"button",type:"success",icon:a(Z),onClick:z},{default:t(()=>[r(" 添加就诊人 ")]),_:1},8,["icon"])])]),default:t(()=>[a(p)==0?(i(),V("div",re,[(i(!0),V(x,null,T(a(b),(l,L)=>(i(),U(g,{onRemoveUser:D,onChangeScene:A,class:"item",key:l.id,user:l,index:L},null,8,["user","index"]))),128))])):I("",!0),a(p)==1?(i(),V("div",ie,[e(c,{"content-position":"left"},{default:t(()=>[r("就诊人信息")]),_:1}),e(k,{style:{width:"60%",margin:"10px auto"}},{default:t(()=>[e(d,{label:"用户姓名"},{default:t(()=>[e(m,{placeholder:"请输入用户姓名",modelValue:a(o).name,"onUpdate:modelValue":s[0]||(s[0]=l=>a(o).name=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"证件类型"},{default:t(()=>[e(M,{placeholder:"请你选择证件的类型",style:{width:"100%"},modelValue:a(o).certificatesType,"onUpdate:modelValue":s[1]||(s[1]=l=>a(o).certificatesType=l)},{default:t(()=>[(i(!0),V(x,null,T(a(C),l=>(i(),U(q,{key:l.id,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"证件号码"},{default:t(()=>[e(m,{placeholder:"请输入证件号码",modelValue:a(o).certificatesNo,"onUpdate:modelValue":s[2]||(s[2]=l=>a(o).certificatesNo=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"用户性别"},{default:t(()=>[e(N,{modelValue:a(o).sex,"onUpdate:modelValue":s[3]||(s[3]=l=>a(o).sex=l)},{default:t(()=>[e(f,{value:1},{default:t(()=>[r("男")]),_:1}),e(f,{value:0},{default:t(()=>[r("女")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"出生日期"},{default:t(()=>[e(R,{modelValue:a(o).birthdate,"onUpdate:modelValue":s[4]||(s[4]=l=>a(o).birthdate=l),"value-format":"YYYY-MM-DD",type:"date",placeholder:"选择出生日期"},null,8,["modelValue"])]),_:1}),e(d,{label:"手机号码"},{default:t(()=>[e(m,{placeholder:"请输入手机号码",modelValue:a(o).phone,"onUpdate:modelValue":s[5]||(s[5]=l=>a(o).phone=l)},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{"content-position":"left"},{default:t(()=>[r("建档信息（完善后部分医院首次就诊不排队建档）")]),_:1}),e(k,{style:{width:"60%",margin:"10px auto"}},{default:t(()=>[e(d,{label:"婚姻状况"},{default:t(()=>[e(N,{modelValue:a(o).isMarry,"onUpdate:modelValue":s[6]||(s[6]=l=>a(o).isMarry=l)},{default:t(()=>[e(f,{value:1},{default:t(()=>[r("已婚")]),_:1}),e(f,{value:0},{default:t(()=>[r("未婚")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"自费/医保"},{default:t(()=>[e(N,{modelValue:a(o).isInsure,"onUpdate:modelValue":s[7]||(s[7]=l=>a(o).isInsure=l)},{default:t(()=>[e(f,{value:1},{default:t(()=>[r("自费")]),_:1}),e(f,{value:0},{default:t(()=>[r("医保")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"当前住址"},{default:t(()=>[e(E,{props:Y,modelValue:a(o).addressSelected,"onUpdate:modelValue":s[8]||(s[8]=l=>a(o).addressSelected=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"详细地址"},{default:t(()=>[e(m,{placeholder:"请输入详细地址",modelValue:a(o).address,"onUpdate:modelValue":s[9]||(s[9]=l=>a(o).address=l)},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{"content-position":"left"},{default:t(()=>[r("联系人信息（选填）")]),_:1}),e(k,{style:{width:"60%",margin:"10px auto"},"label-width":"80"},{default:t(()=>[e(d,{label:"用户姓名"},{default:t(()=>[e(m,{placeholder:"请输入姓名",modelValue:a(o).contactsName,"onUpdate:modelValue":s[10]||(s[10]=l=>a(o).contactsName=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"证件类型"},{default:t(()=>[e(M,{placeholder:"请选择",style:{width:"100%"},modelValue:a(o).contactsCertificatesType,"onUpdate:modelValue":s[11]||(s[11]=l=>a(o).contactsCertificatesType=l)},{default:t(()=>[(i(!0),V(x,null,T(a(C),l=>(i(),U(q,{key:l.id,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"证件号码"},{default:t(()=>[e(m,{placeholder:"请输入证件号码",modelValue:a(o).contactsCertificatesNo,"onUpdate:modelValue":s[12]||(s[12]=l=>a(o).contactsCertificatesNo=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"手机号码"},{default:t(()=>[e(m,{placeholder:"请输入手机号",modelValue:a(o).contactsPhone,"onUpdate:modelValue":s[13]||(s[13]=l=>a(o).contactsPhone=l)},null,8,["modelValue"])]),_:1}),e(d,null,{default:t(()=>[e(v,{type:"success",size:"default",onClick:j},{default:t(()=>[r("提交")]),_:1}),e(v,{type:"primary",size:"default",onClick:S},{default:t(()=>[r("重写")]),_:1})]),_:1})]),_:1})])):I("",!0)]),_:1})}}}),me=se(ce,[["__scopeId","data-v-d61b2b98"]]);export{me as default};
